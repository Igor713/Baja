<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baja</title>

    <link rel="stylesheet" href="assets/css/global.css/global.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
</head>

<body>
    <div class="main-division">
        <custom-menu></custom-menu>

        <section id="content" class="content"></section>
    </div>

    <script>
        let content = document.getElementById('content')

        if (content.length == null) {
            content.innerHTML = `<custom-brand></custom-brand>`
        }   
    </script>

    <script>
        setInterval(() => {

            const formData = document.querySelector('register-expenses').shadowRoot.querySelector('#expense-form')

            if (formData) {

                formData.addEventListener('submit', (e) => {

                    e.preventDefault()

                    const expenseName = document.querySelector('register-expenses').shadowRoot.querySelector('#expense-name')
                    const expensePrice = document.querySelector('register-expenses').shadowRoot.querySelector('#expense-price')
                    const expenseExperationDay = document.querySelector('register-expenses').shadowRoot.querySelector('#expense-experation-day')

                    console.log(expenseName)

                    const expenseElement = {

                        nome: expenseName.value,
                        price: expensePrice.value,
                        experationDay: expenseExperationDay.value
                    }

                    const init = {

                        method: 'POST',
                        headers: {
                            "Content-Type": 'application/json'
                        },
                        body: JSON.stringify(expenseElement)
                    }

                    fetch('http://localhost:3000/expense', init)
                })
            }
        }, 2000)

    </script>

    <script src="components/custom-menu.js"></script>
    <script src="components/register-expenses.js"></script>
    <script src="components/custom-brand.js"></script>
    <script src="components/list-expenses.js"></script>
    <script src="server/server.js"></script>
</body>

</html>